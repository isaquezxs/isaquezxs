-- Tela de Carregamento Shadow hubBrookhaven - Estilizada
local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Fun√ß√£o para limpar mem√≥ria
local function cleanupMemory()
    for i = 1, 10 do
        wait()
        game:GetService("RunService").Heartbeat:Wait()
    end
end

-- Criando a ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FireHubLoading"
screenGui.Parent = playerGui

-- Fundo da tela
local background = Instance.new("Frame")
background.Size = UDim2.new(1,0,1,0)
background.Position = UDim2.new(0,0,0,0)
background.BackgroundColor3 = Color3.fromRGB(20,20,20)
background.BorderSizePixel = 0
background.Parent = screenGui

-- T√≠tulo SHADOW HUB
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,100)
title.Position = UDim2.new(0,0,0.25,0)
title.BackgroundTransparency = 1
title.Text = "SHADOW SCRIPTS"
title.Font = Enum.Font.GothamBlack
title.TextSize = 60
title.TextColor3 = Color3.fromRGB(255,85,0)
title.Parent = background
title.TextScaled = true

-- Barra de carregamento com fundo
local barBackground = Instance.new("Frame")
barBackground.Size = UDim2.new(0.6,0,0,30)
barBackground.Position = UDim2.new(0.2,0,0.55,0)
barBackground.BackgroundColor3 = Color3.fromRGB(50,50,50)
barBackground.BorderSizePixel = 0
barBackground.Parent = background

-- Barra de preenchimento
local barFill = Instance.new("Frame")
barFill.Size = UDim2.new(0,0,1,0)
barFill.BackgroundColor3 = Color3.fromRGB(255,85,0)
barFill.BorderSizePixel = 0
barFill.Parent = barBackground

-- Gradiente na barra
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255,85,0)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255,180,0)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255,85,0))
}
gradient.Rotation = 45
gradient.Parent = barFill

-- Texto de carregamento
local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(1,0,0,30)
loadingText.Position = UDim2.new(0,0,0.62,0)
loadingText.BackgroundTransparency = 1
loadingText.Text = "Carregando..."
loadingText.Font = Enum.Font.Gotham
loadingText.TextSize = 28
loadingText.TextColor3 = Color3.fromRGB(255,255,255)
loadingText.Parent = background

-- Fun√ß√£o para animar a barra
local function animateBar(duration)
    local startTime = tick()
    while tick() - startTime < duration do
        local progress = (tick() - startTime) / duration
        barFill.Size = UDim2.new(progress,0,1,0)
        wait(0.03)
    end
    barFill.Size = UDim2.new(1,0,1,0)
end

-- Fun√ß√£o para piscar o texto
local blinkConnection
spawn(function()
    blinkConnection = game:GetService("RunService").Heartbeat:Connect(function()
        if not screenGui.Parent then
            blinkConnection:Disconnect()
            return
        end
        loadingText.TextTransparency = loadingText.TextTransparency == 0 and 0.3 or 0
        wait(0.5)
    end)
end)

-- Executa anima√ß√£o por 3 segundos
animateBar(3)

-- Remove tela ap√≥s carregar
wait(0.5)
if blinkConnection then
    blinkConnection:Disconnect()
end
screenGui:Destroy()
cleanupMemory()

-- Carrega a biblioteca UI com tratamento de erro melhorado
local success, redzlib = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/tbao143/Library-ui/refs/heads/main/Redzhubui"))()
end)

if not success then
    local success2, lib = pcall(function()
        return loadstring(game:HttpGet("https://raw.githubusercontent.com/bloodball/-back-ups-for-libs/main/wall"))()
    end)
    if success2 then
        redzlib = lib
    else
        error("N√£o foi poss√≠vel carregar a biblioteca UI")
        return
    end
end

-- Fun√ß√£o para criar a interface principal otimizada
local function createOptimizedInterface()
    local Window = redzlib:MakeWindow({
        Title = "Shadow hub | Brookhaven üè°",
        SubTitle = "by isaquexz",
        SaveFolder = "ShadowHubBrookhaven"
    })

    -- Tab1: Credits (mantido simples)
    local Tab1 = Window:MakeTab({"Credits", "info"})

    Tab1:AddDiscordInvite({
        Name = "Shadow Hub",
        Description = "Join server",
        Logo = "rbxassetid://8652665149",
        Invite = "https://discord.gg/tsxKumHC",
    })

    local Section = Tab1:AddSection({"Cr√©ditos"})
    Tab1:AddParagraph({"Criador", "isaquexsz"})
    Tab1:AddParagraph({"Vers√£o", "BETA"})
    Tab1:AddParagraph({"Executor", "KRNL/Synapse"})
    Tab1:AddParagraph({"Jogadores Online", tostring(#game.Players:GetPlayers())})

    -- Tab2: Fun√ß√µes Principais (otimizado)
    local Tab2 = Window:MakeTab({"Main", "Home"})

    Tab2:AddSection({"Scripts de admin"})

    Tab2:AddButton({"Painel Admin shadow hub", function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/fatesc/fates-admin/main/main.lua"))()
    end})

    Tab2:AddButton({"Infinite Yield", function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
    end})

    -- SISTEMA DE VERIFICA√á√ÉO simplificado
    Tab2:AddSection({"Verifica√ß√£o de usu√°rio shadow"})

    Tab2:AddButton({"Verifique", function()
        local TextChatService = game:GetService("TextChatService")
        local StarterGui = game:GetService("StarterGui")
        
        local function sendChatMessage(message)
            local success, error = pcall(function()
                if TextChatService then
                    local channel = TextChatService.TextChannels.RBXGeneral
                    if channel then
                        channel:SendAsync(message)
                        return true
                    end
                end
                game.Players:Chat(message)
                return true
            end)
            
            if not success then
                warn("Erro ao enviar mensagem: " .. tostring(error))
                return false
            end
            return true
        end
        
        local success1 = sendChatMessage("/Verifique")
        wait(0.5)
        local success2 = sendChatMessage("Shadow_###")
        
        if success1 and success2 then
            StarterGui:SetCore("SendNotification", {
                Title = "Verifique usu√°rios Shadow",
                Text = "Comandos enviados no chat!",
                Duration = 3
            })
        else
            StarterGui:SetCore("SendNotification", {
                Title = "Erro",
                Text = "Falha ao enviar mensagens!",
                Duration = 3
            })
        end
    end})

    -- Tab3: Troll (fun√ß√µes principais apenas)
    local Tab3 = Window:MakeTab({"Troll", "skull"})

    -- Vari√°veis globais para as fun√ß√µes
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local RunService = game:GetService("RunService")
    local selectedPlayerName = nil
    local methodKill = ""

    -- Fun√ß√£o para obter lista de jogadores
    local function getPlayerList()
        local players = Players:GetPlayers()
        local playerNames = {}
        for _, player in ipairs(players) do
            if player ~= LocalPlayer then
                table.insert(playerNames, player.Name)
            end
        end
        return playerNames
    end

    -- Dropdown para selecionar jogador
    local killDropdown = Tab3:AddDropdown({
        Name = "Selecionar Jogador",
        Description = "Escolha um jogador para trollar",
        Options = getPlayerList(),
        Default = "",
        Callback = function(value)
            selectedPlayerName = value
            getgenv().Target = value
        end
    })

    -- BOT√ÉO ATUALIZAR PLAYER LIST
    Tab3:AddButton({
        Name = "Atualizar Player List",
        Callback = function()
            local tablePlayers = Players:GetPlayers()
            local newPlayers = {}
            if killDropdown and #tablePlayers > 0 then
                for _, player in ipairs(tablePlayers) do
                    if player.Name ~= LocalPlayer.Name then
                        table.insert(newPlayers, player.Name)
                    end
                end
                killDropdown:Set(newPlayers)
                if selectedPlayerName and not Players:FindFirstChild(selectedPlayerName) then
                    selectedPlayerName = nil
                    getgenv().Target = nil
                    killDropdown:SetValue("")
                end
            end
        end
    })

    -- Fun√ß√µes principais apenas (removendo fun√ß√µes menos usadas)
    Tab3:AddSection({Name = "Fun√ß√µes Principais"})

    Tab3:AddButton({
        Name = "Teleportar at√© o Player",
        Callback = function()
            if not selectedPlayerName or not Players:FindFirstChild(selectedPlayerName) then
                return
            end
            local character = LocalPlayer.Character
            local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
            if not humanoidRootPart then return end

            local targetPlayer = Players:FindFirstChild(selectedPlayerName)
            if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                humanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame
            end
        end
    })

    -- Dropdown para selecionar m√©todo de kill
    Tab3:AddDropdown({
        Name = "Selecionar M√©todo para Matar",
        Description = "Escolha o m√©todo de kill",
        Options = {"Bus", "Couch"},
        Default = "",
        Callback = function(value)
            methodKill = value
        end
    })

    -- Fun√ß√£o KillWithCouch simplificada
    local function KillWithCouch()
        if not selectedPlayerName then return end
        
        local targetPlayer = Players:FindFirstChild(selectedPlayerName)
        if not targetPlayer or not targetPlayer.Character or not targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
            return
        end

        local args = { [1] = "ClearAllTools" }
        ReplicatedStorage.RE["1Clea1rTool1s"]:FireServer(unpack(args))
        local args = { [1] = "PickingTools", [2] = "Couch" }
        ReplicatedStorage.RE:FindFirstChild("1Too1l"):InvokeServer(unpack(args))

        local couch = LocalPlayer.Backpack:WaitForChild("Couch", 2)
        if not couch then return end

        couch.Name = "Chaos.Couch"
        local seat1 = couch:FindFirstChild("Seat1")
        if seat1 then
            seat1.Disabled = true
        end
        
        couch.Parent = LocalPlayer.Character

        local tet = Instance.new("BodyVelocity", seat1)
        tet.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        tet.P = 1250
        tet.Velocity = Vector3.new(0, 0, 0)

        for m = 1, 35 do
            local tRoot = targetPlayer.Character and targetPlayer.Character.HumanoidRootPart
            if not tRoot then break end
            local pos = tRoot.Position + (tRoot.Velocity / 2)
            if seat1 then
                seat1.CFrame = CFrame.new(pos) * CFrame.new(-2, 2, 0)
            end
            task.wait()
        end
        
        if tet then tet:Destroy() end
        if couch then
            couch.Parent = LocalPlayer.Backpack
        end
        ReplicatedStorage.RE["1Clea1rTool1s"]:FireServer("ClearAllTools")
    end

    -- Bot√£o para matar jogador
    Tab3:AddButton({
        Name = "Matar Player",
        Callback = function()
            if not selectedPlayerName or not Players:FindFirstChild(selectedPlayerName) then
                return
            end
            
            if methodKill == "Couch" then
                KillWithCouch()
            else
                -- M√©todo de √¥nibus b√°sico
                local character = LocalPlayer.Character
                local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
                if not humanoidRootPart then return end

                local targetPlayer = Players:FindFirstChild(selectedPlayerName)
                if targetPlayer and targetPlayer.Character then
                    humanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, -5)
                end
            end
        end
    })

    -- Tab4: Scripts Trolls (mantendo apenas os essenciais)
    local Tab4 = Window:MakeTab({"Scripts Trolls", "fire"})

    Tab4:AddSection({"Invisibilidade"})

    Tab4:AddButton({"Ficar Invis√≠vel", function()
        local player = game.Players.LocalPlayer
        local character = player.Character
        if character then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.Transparency = 1
                end
            end
        end
    end})

    Tab4:AddButton({"Voltar ao Normal", function()
        local player = game.Players.LocalPlayer
        local character = player.Character
        if character then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.Transparency = 0
                end
            end
        end
    end})

    -- Tab5: √Åudio (lista reduzida)
    local Tab5 = Window:MakeTab({"Audio", "radio"})

    local loopAtivo = false
    local InputID = ""

    Tab5:AddTextBox({
        Name = "ID do √Åudio",
        Description = "Digite o ID do som",
        Default = "",
        PlaceholderText = "Exemplo: 6832470734",
        ClearTextOnFocus = true,
        Callback = function(text)
            InputID = text
        end
    })

    local function playSound(soundId)
        pcall(function()
            local sound = Instance.new("Sound")
            sound.SoundId = "rbxassetid://" .. soundId
            sound.Parent = workspace
            sound:Play()
            game.Debris:AddItem(sound, 10)
        end)
    end

    Tab5:AddButton({
        Name = "Tocar Som",
        Description = "Toca o som inserido",
        Callback = function()
            if InputID and InputID ~= "" then
                playSound(InputID)
            end
        end
    })

    -- Apenas alguns sons de memes essenciais
    Tab5:AddSection({"Sons de Memes"})

    local essentialSounds = {
        {name = "pankapakan", id = "122547522269143"},
        {name = "Gemido ultra r√°pido", id = "128863565301778"},
        {name = "uwu", id = "76820720070248"},
        {name = "skibidi", id = "128771670035179"},
        {name = "receba", id = "94142662616215"}
    }

    for _, sound in ipairs(essentialSounds) do
        Tab5:AddButton({
            Name = sound.name,
            Description = "Tocar " .. sound.name,
            Callback = function()
                playSound(sound.id)
            end
        })
    end

    return Window
end

-- Criar interface com tratamento de erro
local success, err = pcall(function()
    createOptimizedInterface()
end)

if not success then
    warn("Erro ao criar interface: " .. tostring(err))
    game.StarterGui:SetCore("SendNotification", {
        Title = "Erro",
        Text = "Falha ao carregar interface. Mem√≥ria insuficiente.",
        Duration = 5
    })
end

-- Coleta de lixo peri√≥dica
spawn(function()
    while wait(30) do
        cleanupMemory()
    end
end)